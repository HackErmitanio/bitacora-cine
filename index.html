<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Escena 24</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0b1c2d;
  color: #fff;
}

header {
  padding: 20px;
  text-align: center;
  background: #071421;
}

header h1 {
  margin: 0;
}

input {
  width: 90%;
  max-width: 500px;
  padding: 10px;
  font-size: 16px;
  margin-top: 15px;
  border-radius: 5px;
  border: none;
}

section {
  padding: 20px;
}

h2 {
  border-bottom: 1px solid #1e3a5f;
  padding-bottom: 5px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 15px;
}

.card {
  cursor: pointer;
}

.card img {
  width: 100%;
  border-radius: 8px;
  transition: transform .2s;
}

.card img:hover {
  transform: scale(1.05);
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  display: none;
  overflow-y: auto;
}

.modal-content {
  max-width: 900px;
  margin: 40px auto;
  background: #071421;
  padding: 20px;
  border-radius: 10px;
}

.modal img {
  width: 200px;
  float: left;
  margin-right: 20px;
  border-radius: 10px;
}

.close {
  float: right;
  font-size: 25px;
  cursor: pointer;
}

.stars span {
  font-size: 25px;
  cursor: pointer;
  color: gray;
}

.stars span.active {
  color: gold;
}

textarea {
  width: 100%;
  min-height: 80px;
  margin-top: 10px;
}

button {
  padding: 10px;
  background: #1e90ff;
  border: none;
  color: white;
  cursor: pointer;
  margin-top: 10px;
}
</style>
</head>

<body>

<header>
  <h1>üé¨ Escena 24</h1>
  <p>Cine, series, anime y cultura cinematogr√°fica</p>
  <input id="search" placeholder="Buscar pel√≠cula, serie o anime...">
</header>

<section>
  <h2>Resultados</h2>
  <div class="grid" id="results"></div>
</section>

<div class="modal" id="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">‚úñ</span>
    <img id="modalImg">
    <h2 id="modalTitle"></h2>
    <p id="modalInfo"></p>
    <p id="modalOverview"></p>

    <h3>‚≠ê Tu puntuaci√≥n</h3>
    <div class="stars" id="stars"></div>

    <h3>‚úç Rese√±a</h3>
    <textarea id="review"></textarea>
    <button onclick="saveReview()">Guardar rese√±a</button>
  </div>
</div>

<script>
const API_KEY = "5b4ad82505bd1853a5256c1db2d4b330";
const IMG = "https://image.tmdb.org/t/p/w500";
const results = document.getElementById("results");

document.getElementById("search").addEventListener("keyup", e => {
  if (e.key === "Enter") search(e.target.value);
});

function search(query) {
  results.innerHTML = "‚è≥ Buscando...";
  fetch(`https://api.themoviedb.org/3/search/multi?api_key=${API_KEY}&language=es-MX&query=${query}`)
    .then(r => r.json())
    .then(data => showResults(data.results));
}

function showResults(items) {
  results.innerHTML = "";
  items.forEach(item => {
    if (!item.poster_path) return;

    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<img src="${IMG + item.poster_path}">`;
    div.onclick = () => openModal(item);
    results.appendChild(div);
  });
}

function openModal(item) {
  document.getElementById("modal").style.display = "block";
  document.getElementById("modalImg").src = IMG + item.poster_path;
  document.getElementById("modalTitle").innerText = item.title || item.name;
  document.getElementById("modalOverview").innerText = item.overview || "Sin descripci√≥n";

  const year = (item.release_date || item.first_air_date || "").split("-")[0];
  document.getElementById("modalInfo").innerText = `${item.media_type.toUpperCase()} ¬∑ ${year}`;

  loadStars(item.id);
  loadReview(item.id);
}

function closeModal() {
  document.getElementById("modal").style.display = "none";
}

function loadStars(id) {
  const container = document.getElementById("stars");
  container.innerHTML = "";
  let saved = localStorage.getItem("rating_" + id) || 0;

  for (let i = 1; i <= 5; i++) {
    const s = document.createElement("span");
    s.innerText = "‚òÖ";
    if (i <= saved) s.classList.add("active");
    s.onclick = () => {
      localStorage.setItem("rating_" + id, i);
      loadStars(id);
    };
    container.appendChild(s);
  }
}

function saveReview() {
  const title = document.getElementById("modalTitle").innerText;
  localStorage.setItem("review_" + title, document.getElementById("review").value);
  alert("Rese√±a guardada");
}

function loadReview(id) {
  document.getElementById("review").value = localStorage.getItem("review_" + id) || "";
}
</script>

</body>
</html>









